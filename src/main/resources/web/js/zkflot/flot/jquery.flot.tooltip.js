if(!Array.prototype.indexOf){Array.prototype.indexOf=function(d,f){if(this===undefined||this===null){throw new TypeError('"this" is null or not defined')}var e=this.length>>>0;f=+f||0;if(Math.abs(f)===Infinity){f=0}if(f<0){f+=e;if(f<0){f=0}}for(;f<e;f++){if(this[f]===d){return f}}return -1}}(function(g){var h={tooltip:false,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:true,onHover:function(a,b){}}};var f=function(a){this.tipPosition={x:0,y:0};this.init(a)};f.prototype.init=function(l){var c=this;var b=g.plot.plugins.length;this.plotPlugins=[];if(b){for(var a=0;a<b;a++){this.plotPlugins.push(g.plot.plugins[a].name)}}l.hooks.bindEvents.push(function(n,i){c.plotOptions=n.getOptions();if(c.plotOptions.tooltip===false||typeof c.plotOptions.tooltip==="undefined"){return}c.tooltipOptions=c.plotOptions.tooltipOpts;var j=c.getDomElement();g(n.getPlaceholder()).bind("plothover",k);g(i).bind("mousemove",d)});l.hooks.shutdown.push(function(i,j){g(i.getPlaceholder()).unbind("plothover",k);g(j).unbind("mousemove",d)});function d(j){var i={};i.x=j.pageX;i.y=j.pageY;c.updateTooltipPosition(i)}function k(j,r,p){var i=c.getDomElement();if(p){var q;q=c.stringFormat(c.tooltipOptions.content,p);i.html(q);c.updateTooltipPosition({x:r.pageX,y:r.pageY});i.css({left:c.tipPosition.x+c.tooltipOptions.shifts.x,top:c.tipPosition.y+c.tooltipOptions.shifts.y}).show();if(typeof c.tooltipOptions.onHover==="function"){c.tooltipOptions.onHover(p,i)}}else{i.hide().html("")}}};f.prototype.getDomElement=function(){var a;if(g("#flotTip").length>0){a=g("#flotTip")}else{a=g("<div />").attr("id","flotTip");a.appendTo("body").hide().css({position:"absolute"});if(this.tooltipOptions.defaultTheme){a.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})}}return a};f.prototype.updateTooltipPosition=function(b){var a=g("#flotTip").outerWidth()+this.tooltipOptions.shifts.x;var c=g("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;if((b.x-g(window).scrollLeft())>(g(window).innerWidth()-a)){b.x-=a}if((b.y-g(window).scrollTop())>(g(window).innerHeight()-c)){b.y-=c}this.tipPosition.x=b.x;this.tipPosition.y=b.y};f.prototype.stringFormat=function(d,F){var D=/%p\.{0,1}(\d{0,})/;var B=/%s/;var E=/%lx/;var A=/%ly/;var c=/%x\.{0,1}(\d{0,})/;var v=/%y\.{0,1}(\d{0,})/;var w="%x";var u="%y";var a,b;if(typeof F.series.threshold!=="undefined"){a=F.datapoint[0];b=F.datapoint[1]}else{a=F.series.data[F.dataIndex][0];b=F.series.data[F.dataIndex][1]}if(F.series.label===null&&F.series.originSeries){F.series.label=F.series.originSeries.label}if(typeof(d)==="function"){d=d(F.series.label,a,b,F)}if(typeof(F.series.percent)!=="undefined"){d=this.adjustValPrecision(D,d,F.series.percent)}if(typeof(F.series.label)!=="undefined"){d=d.replace(B,F.series.label)}else{d=d.replace(B,"")}if(this.hasAxisLabel("xaxis",F)){d=d.replace(E,F.series.xaxis.options.axisLabel)}else{d=d.replace(E,"")}if(this.hasAxisLabel("yaxis",F)){d=d.replace(A,F.series.yaxis.options.axisLabel)}else{d=d.replace(A,"")}if(this.isTimeMode("xaxis",F)&&this.isXDateFormat(F)){d=d.replace(c,this.timestampToDate(a,this.tooltipOptions.xDateFormat))}if(this.isTimeMode("yaxis",F)&&this.isYDateFormat(F)){d=d.replace(v,this.timestampToDate(b,this.tooltipOptions.yDateFormat))}if(typeof a==="number"){d=this.adjustValPrecision(c,d,a)}if(typeof b==="number"){d=this.adjustValPrecision(v,d,b)}if(typeof F.series.xaxis.ticks!=="undefined"){var x;if(this.hasRotatedXAxisTicks(F)){x="rotatedTicks"}else{x="ticks"}var C=F.dataIndex+F.seriesIndex;if(F.series.xaxis[x].length>C&&!this.isTimeMode("xaxis",F)){d=d.replace(c,F.series.xaxis[x][C].label)}}if(typeof F.series.yaxis.ticks!=="undefined"){for(var y in F.series.yaxis.ticks){if(F.series.yaxis.ticks.hasOwnProperty(y)){var z=(this.isCategoriesMode("yaxis",F))?F.series.yaxis.ticks[y].label:F.series.yaxis.ticks[y].v;if(z===b){d=d.replace(v,F.series.yaxis.ticks[y].label)}}}}if(typeof F.series.xaxis.tickFormatter!=="undefined"){d=d.replace(w,F.series.xaxis.tickFormatter(a,F.series.xaxis).replace(/\$/g,"$$"))}if(typeof F.series.yaxis.tickFormatter!=="undefined"){d=d.replace(u,F.series.yaxis.tickFormatter(b,F.series.yaxis).replace(/\$/g,"$$"))}return d};f.prototype.isTimeMode=function(a,b){return(typeof b.series[a].options.mode!=="undefined"&&b.series[a].options.mode==="time")};f.prototype.isXDateFormat=function(a){return(typeof this.tooltipOptions.xDateFormat!=="undefined"&&this.tooltipOptions.xDateFormat!==null)};f.prototype.isYDateFormat=function(a){return(typeof this.tooltipOptions.yDateFormat!=="undefined"&&this.tooltipOptions.yDateFormat!==null)};f.prototype.isCategoriesMode=function(a,b){return(typeof b.series[a].options.mode!=="undefined"&&b.series[a].options.mode==="categories")};f.prototype.timestampToDate=function(c,a){var b=new Date(c*1);return g.plot.formatDate(b,a,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)};f.prototype.adjustValPrecision=function(d,a,j){var b;var c=a.match(d);if(c!==null){if(RegExp.$1!==""){b=RegExp.$1;j=j.toFixed(b);a=a.replace(d,j)}}return a};f.prototype.hasAxisLabel=function(a,b){return(this.plotPlugins.indexOf("axisLabels")!==-1&&typeof b.series[a].options.axisLabel!=="undefined"&&b.series[a].options.axisLabel.length>0)};f.prototype.hasRotatedXAxisTicks=function(a){return(g.grep(g.plot.plugins,function(b){return b.name==="tickRotor"}).length===1&&typeof a.series.xaxis.rotatedTicks!=="undefined")};var e=function(a){new f(a)};g.plot.plugins.push({init:e,options:h,name:"tooltip",version:"0.6.7"})})(jQuery);